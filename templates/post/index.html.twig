{% extends 'base.html.twig' %}

{% block title %}EmprunteMonPoney - Annonces
{% endblock %}

{% block body %}

	<div class="backgroundBlue">

		{% block header %}
			{% include "smallHeader.html.twig" %}
		{% endblock %}

		{% block container %}

			<div class="container-lg">

				<h2 class="mt-2 text-center">Annonces</h2>

				{# flash message #}
				{% for message in app.flashes('message') %}
					<div class="alert alert-success" role="alert">
						{{ message }}
					</div>
				{% endfor %}

				{# cards #}
				{# <div class="card-deck"> #}

					<div class="row row-cols-1 row-cols-md-3">

						{% if posts is not null %}
							{% for post in posts %}

								<div class="col mb-3">
									{% include "post/postCard.html.twig" %}
								</div>

							{% endfor %}
						{% endif %}

					</div>
				{# </div> #}

				{# paging #}

					{% set totalPages = (nbPosts / limit)|round(0,'ceil') %}
					{# set the amount of pages needed #}

					<nav aria-label="..." class="d-flex justify-content-center">
						<ul class="pagination">

						{# previous page #}
							<li class="page-item {{ (page == 1) ? 'disabled' : '' }}">
								<a class="page-link" href="{{ (page > 1) ? '?page=' ~ (page - 1) : '' }}" tabindex="-1" aria-disabled="true">
									<i class="fas fa-chevron-left"></i>
								</a>
							</li>

						{% for item in 1.. totalPages %}
							<li class="page-item {{ (page == item) ? 'active' : '' }}">
								<a class="page-link" href="?page={{ item }}">{{ item }}</a>
							</li>
						{% endfor %}

						{# next page #}
							<li class="page-item {{ (page == totalPages) ? 'disabled' : '' }}">
								<a class="page-link" href="{{ (page < totalPages) ? '?page=' ~ (page + 1) : '' }}">
									<i class="fas fa-chevron-right"></i>
								</a>
							</li>

						</ul>
					</nav>
				
				{# end paging #}

			</div>

		{% endblock %}
	</div>
{% endblock %}
